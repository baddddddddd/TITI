<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= locals.info.title %> | Student Portal</title>

  <link rel="stylesheet" href="/styles/view_assignment.css">
</head>

<body>
  <div class="content-wrapper">
    <div class="content-grid">
      <div class="left-column">
        <div class="heading">
          <div class="title"><%= locals.info.title %></div>
          <div class="upload-date"><%= new Date(locals.info.uploadDate).toLocaleString('en-US', { timeZone: 'UTC' }) %></div>
        </div>
        <hr class="rule">
        <textarea readonly class="instructions"><%= locals.info.instructions %></textarea>
        <hr class="rule">

        <div class="attachments">
          <div class="stream-card">
            <form class="stream-header" action="/course/download" method="post">
              <div class="stream-left">
                <i class='bx bxs-file'></i>
                <div class="stream-info">
                  <div class="stream-title"><%= locals.info.fileName %></div>
                </div>
              </div>
              <input type="hidden" name="path" value="<%= locals.info.filePath %>">
              <input class="btn" type="submit" value="DOWNLOAD">
            </form>
          </div>
        </div>
      </div>
      <div class="right-column">
        <form class="submissions" action="/course/assignment/upload" method="post" enctype="multipart/form-data">
          <div class="submission-header">
            <div class="submission-heading">Your Work</div>
            <div class="status"><%= locals.info.submission.status %></div>
          </div>
          <div class="submission-files">
            <!--
            <div class="add-btn">
              <input class="btn-hollow" type="submit" value="ADD FILE">
            </div>
            -->
            <% if (locals.info.submission.status == "Turned In") { %>
              <div class="file-info">
                <%= locals.info.submission.fileName %>
              </div>
            <% } else { %>
              <input type="file" name="file" id="file">
            <% } %>
          </div>
          <div class="submit-btn">
            <% if (locals.info.submission.status == "Turned In") { %>
              <input class="btn-hollow" type="submit" value="UNSUBMIT">
              <input type="hidden" name="type" value="unsubmit">
              <% } else { %>
              <input class="btn" type="submit" value="SUBMIT">
              <input type="hidden" name="type" value="submit">
            <% } %>
          </div>
          <input type="hidden" name="assignmentId" value="<%= locals.info.id %>">
        </form>
      </div>
    </div>
  </div>

  <script>
    function autoAdjustHeight(textarea) {
        textarea.style.height = 'auto'; // Reset height to auto
        textarea.style.height = (textarea.scrollHeight) + 'px'; // Set new height
    }

    autoAdjustHeight(document.querySelector(".instructions"));
  </script>
</body>
</html>